--
-- Author: lyx
-- Date: 2018/3/10
-- Time: 15:07
-- 说明：测试
-- 使用方法：
--  call <service addr> exe_file "hotfix/fixtest.lua"
--

local skynet = require "skynet_plus"
local cluster = require "skynet.cluster"
local base = require "base"
local nodefunc = require "nodefunc"
local basefunc = require "basefunc"
require "normal_enum"


require "printfunc"

local DATA = base.DATA
local CMD = base.CMD
local PUBLIC=base.PUBLIC


--[[ sql date > 4/10 
	SELECT * FROM player_ji_pai_qi WHERE valid_time > 1554825600 AND id NOT like "robot%"
	
	\t0\t
	,
	
	\n
	,\n

	call data_service exe_file "hotfix/fix_jpq.lua"
]]

local jpq_data = 
{
	101051718,1555572673,
	101068951,1558426013,
	101107364,1556539114,
	101240400,1557289522,
	1016797,1576980228,
	101684545,1558414834,
	10173139,1556154224,
	10180605,1556522947,
	10188269,1560047990,
	1020282,1556787724,
	102075673,1556506897,
	102076611,1556155948,
	102077092,1555122004,
	102089130,1554951003,
	102090358,1558940300,
	102096933,1557787864,
	102110050,1560046482,
	102131366,1554977655,
	102131468,1557384981,
	102131836,1556882201,
	102133398,1558660562,
	102186253,1555063428,
	102199714,1555750098,
	102224112,1556770136,
	102232068,1554945614,
	102236680,1556107570,
	102244757,1558169228,
	102259733,1555474221,
	102301137,1653032159,
	102314535,1555935508,
	102332567,1554902989,
	102341204,1556271238,
	102372171,1555156611,
	102395197,1558402281,
	102397797,1557333403,
	102400067,1555393307,
	102417002,1555166993,
	102417686,1556674109,
	102423523,1554857191,
	102426557,1554908607,
	102437345,1560775565,
	102438585,1595383446,
	102438704,1559647158,
	102438954,1558016773,
	102440666,1556418291,
	102441039,1560738690,
	1024412,1571111912,
	102441445,1560738961,
	102449787,1558153211,
	102454624,1559542907,
	102465333,1557364527,
	102472573,1555416328,
	102472588,1556071335,
	102474647,1556170139,
	102476411,1556379699,
	102478742,1554901309,
	102480245,1554901472,
	102491267,1556878735,
	102493560,1556541206,
	102494699,1556156604,
	102495998,1556086304,
	102498069,1555131340,
	102498888,1556939272,
	102499943,1562234289,
	102500373,1554910540,
	102500774,1556070317,
	102502116,1556550393,
	102503660,1561040944,
	102505750,1556438538,
	102505941,1556169581,
	102506079,1556455571,
	102506221,1558412746,
	102506517,1556076163,
	102508701,1556800788,
	102510818,1556243436,
	102511874,1557026878,
	102517199,1556640480,
	102518028,1556765235,
	102519084,1558171192,
	102519378,1557122197,
	102519975,1560438211,
	102519987,1556298480,
	102524351,1558412674,
	102526016,1556071163,
	102527827,1556327680,
	102531895,1554871141,
	102533168,1555480152,
	102533844,1556970640,
	102534073,1557407946,
	102535306,1554845844,
	102566870,1561000299,
	102567172,1560762702,
	102567257,1560736083,
	102570730,1561022290,
	102572099,1560787819,
	102573959,1559375940,
	102576469,1555311698,
	102579231,1555332508,
	102579622,1556469259,
	102581525,1555042116,
	102582595,1556184085,
	102584529,1554906790,
	102585680,1558518709,
	102587979,1554989423,
	102588083,1557047039,
	102589212,1556972298,
	102594086,1559519600,
	102596611,1559457882,
	102596929,1554852681,
	102597240,1555852909,
	102598057,1555761440,
	102598654,1556413695,
	102602179,1556767133,
	102602951,1556878911,
	102604459,1557144932,
	102608192,1554904775,
	102608246,1554887836,
	102608687,1554985148,
	102608997,1555342057,
	102609417,1556107449,
	102609644,1556344881,
	102610373,1555597550,
	102611154,1559227689,
	102611192,1559228447,
	102611763,1556698870,
	102612785,1555556367,
	102614823,1556502158,
	102615171,1555404498,
	102616349,1557896150,
	102618571,1556929396,
	102619090,1555120702,
	102619755,1554888903,
	102627284,1556628272,
	102629552,1556128422,
	102630062,1556958081,
	102634732,1559110355,
	102635185,1557363834,
	102637300,1555493305,
	102637425,1556353534,
	102637623,1554886539,
	102637879,1555216559,
	102639136,1554867683,
	102642295,1554874527,
	102646634,1555639739,
	102646685,1554901950,
	102647725,1555560254,
	102649481,1555046114,
	102650508,1555152036,
	102651877,1554987199,
	102660914,1556622848,
	102662474,1556446424,
	102663864,1557789486,
	102667926,1554988554,
	102670438,1557104233,
	102676768,1554871955,
	102681876,1555329842,
	102687931,1560270607,
	102697245,1555512598,
	102700920,1554994300,
	102702930,1554896174,
	102707731,1555683689,
	102709539,1555214478,
	102712594,1555071056,
	102712613,1557125717,
	102713509,1555086927,
	102714275,1555985215,
	102714309,1555141499,
	102714419,1557479544,
	102714549,1555151430,
	102714860,1557292721,
	102714889,1555456466,
	102715340,1556173620,
	102715714,1555332486,
	102715859,1556606643,
	102715896,1555248311,
	102715947,1557126044,
	102716396,1556373520,
	102716622,1557391743,
	102716690,1558780183,
	102716762,1554828016,
	102716849,1556022768,
	102716946,1556113275,
	102717368,1555484163,
	102717875,1557295280,
	102718091,1556900756,
	102718554,1559638527,
	102718560,1557046509,
	102718575,1555499335,
	102718852,1555554988,
	102719276,1556956714,
	102719662,1557679469,
	102719978,1555648625,
	102720030,1556263609,
	102720383,1558698253,
	102720484,1555691295,
	102720692,1556783969,
	102721113,1556103666,
	102721348,1556453532,
	102722048,1555914676,
	102722416,1557217108,
	102723797,1555901904,
	102725511,1556369435,
	102726141,1556115937,
	102726204,1556538150,
	102730460,1556264899,
	102731349,1556708167,
	102732039,1556366996,
	102733795,1557263749,
	102734047,1556543930,
	102734560,1556610340,
	102734975,1557384191,
	102735280,1556766569,
	102736060,1557053692,
	102736080,1557057484,
	102737172,1554908630,
	102738176,1554906009,
	102740211,1554870355,
	102741472,1557063705,
	102742915,1557146363,
	102743532,1554872403,
	102745295,1554841107,
	102745579,1554887713,
	102745637,1557301009,
	102746805,1554863845,
	102746972,1554874219,
	102747170,1557406707,
	102747343,1554937080,
	102747578,1554826258,
	102747585,1554827929,
	102747594,1554827214,
	102747600,1554827765,
	102747603,1554828915,
	102747607,1554829190,
	102747614,1554828887,
	102747631,1554830358,
	102747638,1554830871,
	102747640,1554830694,
	102747647,1554833664,
	102747655,1554835158,
	102747661,1554835954,
	102747669,1554839331,
	102747673,1554840287,
	102747676,1554841458,
	102747685,1554841829,
	102747692,1554848829,
	102747699,1554842231,
	102747702,1554842483,
	102747709,1554843911,
	102747712,1554843956,
	102747716,1554845211,
	102747720,1554844500,
	102747732,1554846351,
	102747740,1554847410,
	102747742,1554847793,
	102747746,1554847719,
	102747757,1554849258,
	102747759,1554850024,
	102747772,1554871337,
	102747778,1554854967,
	102747782,1554855192,
	102747792,1554855131,
	102747798,1554855440,
	102747808,1554855513,
	102747813,1554855364,
	102747822,1554856416,
	102747823,1554855241,
	102747831,1554855206,
	102747838,1554855180,
	102747840,1554855266,
	102747847,1554855757,
	102747856,1554855372,
	102747875,1554855695,
	102747884,1554855729,
	102747898,1554855784,
	102747905,1554855709,
	102747915,1554855719,
	102747923,1554855852,
	102747930,1554855644,
	102747934,1554857352,
	102747938,1554855944,
	102747943,1554855665,
	102747958,1554855914,
	102747965,1554855860,
	102747970,1554855776,
	102747986,1554855802,
	102748001,1554855808,
	102748004,1554855929,
	102748014,1554864818,
	102748023,1554856344,
	102748031,1554861805,
	102748035,1554856149,
	102748042,1554855906,
	102748049,1554855944,
	102748057,1554855829,
	102748065,1554855915,
	102748071,1554856100,
	102748081,1554855879,
	102748083,1554856195,
	102748096,1554856170,
	102748100,1554856824,
	102748109,1554856455,
	102748117,1554856684,
	102748127,1554856397,
	102748133,1554856954,
	102748136,1554856901,
	102748144,1554857034,
	102748162,1554857819,
	102748163,1554858140,
	102748173,1554858418,
	102748179,1554858437,
	102748183,1554861495,
	102748192,1554861993,
	102748211,1554863674,
	102748219,1554863817,
	102748220,1554864171,
	102748230,1554864540,
	102748237,1554865056,
	102748243,1554865255,
	102748255,1554865467,
	102748257,1554865568,
	102748260,1554878600,
	102748269,1554866361,
	102748273,1554866514,
	102748277,1554866549,
	102748286,1554866539,
	102748291,1554866765,
	102748297,1554867405,
	102748302,1554867044,
	102748308,1554867261,
	102748311,1554867540,
	102748314,1554868166,
	102748315,1554867686,
	102748319,1554867446,
	102748326,1554867468,
	102748338,1554867527,
	102748342,1554867631,
	102748348,1554868106,
	102748356,1554867684,
	102748363,1554867850,
	102748370,1554868296,
	102748376,1554867937,
	102748378,1554868379,
	102748382,1554868482,
	102748390,1554868431,
	102748392,1554869045,
	102748402,1554869286,
	102748420,1554869144,
	102748427,1554870481,
	102748437,1554869301,
	102748442,1554869819,
	102748443,1554870904,
	102748446,1554870229,
	102748455,1554870569,
	102748461,1554870519,
	102748465,1554871689,
	102748467,1554870633,
	102748471,1554871088,
	102748480,1554870856,
	102748498,1554870591,
	102748505,1554870748,
	102748514,1554870617,
	102748526,1554870880,
	102748536,1554870805,
	102748544,1554871411,
	102748548,1554870967,
	102748553,1554870843,
	102748556,1554870956,
	102748562,1554870906,
	102748565,1554871262,
	102748569,1554870860,
	102748579,1554871199,
	102748584,1554870742,
	102748589,1554871058,
	102748594,1554872199,
	102748615,1554871089,
	102748621,1554870924,
	102748631,1554870783,
	102748637,1554870755,
	102748638,1554870884,
	102748648,1554870800,
	102748657,1554870858,
	102748668,1554871195,
	102748671,1554871944,
	102748680,1554871697,
	102748690,1554871797,
	102748698,1554871811,
	102748705,1554872064,
	102748723,1554872006,
	102748730,1554871929,
	102748735,1554872168,
	102748746,1554872110,
	102748753,1554873310,
	102748755,1554872712,
	102748761,1554872779,
	102748765,1554872922,
	102748771,1554873639,
	102748774,1554873764,
	102748783,1554873628,
	102748784,1554874076,
	102748787,1554873994,
	102748788,1554874317,
	102748791,1554874353,
	102748812,1554874149,
	102748816,1554874403,
	102748819,1554874383,
	102748829,1554874496,
	102748833,1554874615,
	102748841,1554875354,
	102748844,1554874954,
	102748852,1554875129,
	102748862,1554874938,
	102748872,1554875231,
	102748886,1554875324,
	102748887,1554875184,
	102748896,1554875377,
	102748899,1554875760,
	102748900,1554875721,
	102748916,1554877258,
	102748924,1554876824,
	102748927,1554876644,
	102748929,1554877171,
	102748934,1554876656,
	102748939,1554876587,
	102748941,1554876675,
	102748945,1554876729,
	102748947,1554876636,
	102748950,1554876851,
	102748955,1554876859,
	102748956,1554876873,
	102748964,1554877500,
	102748982,1554877672,
	102748997,1554878266,
	102749005,1554878842,
	102749008,1554878630,
	102749014,1554878975,
	102749021,1554880081,
	102749024,1554880151,
	102749029,1554879933,
	102749038,1554880251,
	102749040,1554880874,
	102749042,1554880860,
	102749058,1554881175,
	102749066,1554881541,
	102749075,1554881615,
	102749082,1554881577,
	102749086,1554882471,
	102749088,1554882128,
	102749106,1554882293,
	102749110,1554882528,
	102749113,1554882807,
	102749136,1554883238,
	102749139,1554883062,
	102749146,1554883573,
	102749154,1554883673,
	102749156,1554884582,
	102749168,1554885462,
	102749174,1554885360,
	102749184,1554885336,
	102749190,1554885524,
	102749192,1554885809,
	102749205,1554888565,
	102749208,1554886684,
	102749217,1554887537,
	102749244,1554889856,
	102749247,1554890175,
	102749262,1554890964,
	102749281,1554892674,
	102749285,1554891849,
	102749292,1554891452,
	102749293,1554892128,
	102749300,1554891747,
	102749305,1554891942,
	102749314,1554892078,
	102749323,1554892362,
	102749345,1554894202,
	102749355,1554894339,
	102749363,1554896014,
	102749364,1554896247,
	102749368,1554897074,
	102749378,1554897372,
	102749384,1554897340,
	102749391,1554898163,
	102749392,1554898062,
	102749393,1554898784,
	102749401,1554898828,
	102749402,1554899508,
	102749414,1554900238,
	102749417,1554900366,
	102749418,1554900824,
	102749420,1554900495,
	102749422,1554900965,
	102749430,1554901888,
	102749439,1554902446,
	102749452,1554903236,
	102749462,1554903691,
	102749466,1554904014,
	102749483,1554903987,
	102749489,1554904025,
	102749497,1554903908,
	102749503,1554904090,
	102749519,1554904011,
	102749520,1554904228,
	102749540,1554904368,
	102749543,1554904316,
	102749547,1554904387,
	102749551,1554904321,
	102749557,1554904611,
	102749578,1554905133,
	102749581,1554906300,
	102749588,1554940137,
	102749598,1554905388,
	102749609,1554905869,
	102749618,1554905920,
	102749625,1554905542,
	102749629,1554905804,
	102749639,1554905665,
	102749648,1554905845,
	102749656,1554906175,
	102749659,1554906520,
	102749681,1554906024,
	102749687,1554905742,
	102749691,1554905908,
	102749707,1554905920,
	102749720,1554905444,
	102749722,1554905730,
	102749729,1554905645,
	102749735,1554905537,
	102749739,1554905933,
	102749743,1554905918,
	102749753,1554905664,
	102749758,1554905728,
	102749768,1554906064,
	102749774,1554905635,
	102749791,1554908810,
	102749801,1554906508,
	102749802,1554906110,
	102749815,1554905865,
	102749816,1554906345,
	102749821,1554906645,
	102749828,1554905867,
	102749834,1554905879,
	102749850,1554906313,
	102749854,1554906927,
	102749857,1554906183,
	102749870,1554905857,
	102749880,1554905813,
	102749891,1554906186,
	102749908,1554905928,
	102749914,1554906013,
	102749919,1554906142,
	102749929,1554906020,
	102749932,1554906168,
	102749942,1554906189,
	102749959,1554906314,
	102749969,1554906168,
	102749977,1554906425,
	102749983,1554906436,
	102749987,1554906361,
	102749989,1554906506,
	102749997,1554906801,
	102749999,1554906751,
	102750009,1554906620,
	102750014,1554906832,
	102750015,1554906695,
	102750021,1554906804,
	102750025,1554907607,
	102750027,1554906942,
	102750040,1554908683,
	102750042,1554909735,
	102750052,1554909616,
	102750060,1554910397,
	102750066,1554910241,
	102750071,1554910281,
	102750079,1554910388,
	102750085,1554910428,
	102750090,1554910741,
	102750092,1554915201,
	102750100,1554916939,
	102750108,1554917556,
	102750111,1554918996,
	102750120,1554921304,
	102750126,1554926234,
	102750134,1554927643,
	102750136,1554927929,
	102750140,1554928447,
	102750142,1554928844,
	102750149,1554929040,
	102750153,1554929447,
	102750155,1554932968,
	102750158,1554934873,
	102750177,1554936836,
	102750186,1554937099,
	102750190,1554936939,
	102750200,1554937172,
	102750205,1554937393,
	102750212,1554937288,
	102750221,1554937608,
	102750227,1554937282,
	102750228,1554937255,
	102750234,1554937210,
	102750242,1554937087,
	102750244,1554937342,
	102750253,1554937337,
	102750255,1554937606,
	102750256,1554937369,
	102750266,1554937483,
	102750276,1554937288,
	102750286,1554939207,
	102750294,1554937228,
	102750301,1554938291,
	102750311,1554937235,
	102750323,1554937528,
	102750331,1554937099,
	102750334,1554938191,
	102750348,1554938443,
	102750353,1554937222,
	102750360,1554937339,
	102750365,1554939078,
	102750373,1554937333,
	102750381,1554937461,
	102750388,1554937527,
	102750390,1554937368,
	102750391,1554937382,
	102750399,1554941374,
	102750407,1554937461,
	102750408,1554937895,
	102750412,1554938623,
	102750416,1554937282,
	102750426,1554937639,
	102750435,1554938005,
	102750443,1554938326,
	102750451,1554937982,
	102750462,1554941419,
	102750463,1554941520,
	102750464,1554941424,
	102750468,1554941491,
	102750477,1554941412,
	102750487,1554941558,
	102750502,1554941755,
	102750511,1554941430,
	102750516,1554941844,
	1034573,1584419122,
	10347676,1562911126,
	10379434,1557134484,
	1052450,1558403588,
	1055275,1556346929,
	1055452,1559291490,
	10590444,1555640399,
	1059523,1566093676,
	1060183,1555045964,
	10665133,1560996042,
	10667302,1560994680,
	10676292,1555771438,
	107176,1558685233,
	10795214,1557018726,
	10813096,1555328239
}

return function()

	for i=1,#jpq_data,2 do
		
	    CMD.change_object(tostring(jpq_data[i]),
		    	{
		    		object_type = "jipaiqi",
		    		attribute={valid_time=jpq_data[i+1]},
		    	}
		    	,true
		    	,"obj_jipaiqi_manual_init"
		    )

	    skynet.sleep(1)

	end

end